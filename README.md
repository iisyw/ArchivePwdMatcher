# Archive Password Matcher

这是一个使用 Go 语言编写的高性能工具，用于从一个给定的密码列表中，快速匹配受密码保护的压缩文件（支持 .zip, .rar, .7z 格式）。

## 核心优势

* **高性能**: 底层逻辑由 Go 语言实现，相比脚本语言，拥有更快的执行效率。
* **精确的超时控制**: “快速模式”利用了 Go 的 `context` 包，可以实现毫秒级的精确超时判断，极大提升了匹配大量文件时的效率和可靠性。
* **跨平台**: 代码本身是跨平台的。在不同操作系统上，仅需确保系统中已安装 `7z` 和 `unrar` 命令行工具。
* **友好的终端界面**: 采用经典的终端交互界面，提供清晰、实时的进度反馈。

## 支持格式

* ZIP (`.zip`)
* RAR (`.rar`)
* 7z (`.7z`)

## 安装与配置

1. **安装 Go 环境**: 请确保您的系统中已安装 Go 语言环境 (建议版本 >= 1.18)。

2. **安装依赖的命令行工具**: 本工具依赖外部命令来处理压缩文件，请确保它们已安装，并已添加到系统的 `PATH` 环境变量中。
    * **7-Zip**: 用于处理 `.7z` 和 `.zip` 文件。
        * 从 [7-Zip 官网](https://www.7-zip.org/) 下载并安装。
    * **UnRAR**: 用于处理 `.rar` 文件。
        * **Windows**: 从 [RARLab 官网](https://www.rarlab.com/download.htm) 下载并安装 `WinRAR` 或独立的 `unrar.exe`。
        * **Linux (Debian/Ubuntu)**: `sudo apt-get install unrar`
        * **macOS (Homebrew)**: `brew install unrar`

3. **获取本项目**:

    ```bash
    git clone [项目仓库地址]
    cd ArchivePwdMatcher
    ```

## 使用方法

1. **准备密码文件**:
    * 在项目根目录下，创建一个名为 `passwords.txt` 的文本文件。
    * 将您所有已知的密码逐行放入该文件中。程序会自动处理空行和重复的密码。

2. **运行程序**:
    * 在项目根目录下，执行以下命令：

        ```bash
        go run .
        ```

    * 或者，您也可以先构建一个可执行文件，再运行它：

        ```bash
        go build -o ArchiveMatcher .
        ./ArchiveMatcher
        ```

3. **输入路径**:
    * 程序会提示您输入目标压缩包文件或包含压缩包的文件夹路径。
    * 如果直接按回车，将默认使用当前项目所在的目录。

4. **查看任务摘要**:
    * 程序会自动扫描目标路径，并为您呈现一份清晰的任务摘要，包含密码总数和待匹配的压缩包总数。

5. **选择模式**:
    * **快速模式 (Quick Mode) (推荐)**: 速度优先。利用“超时即成功”的策略，在遇到正确的 RAR/7z 密码时能立即判定成功，极大提升匹配大量文件时的体验。
    * **精确模式 (Accurate Mode)**: 100%可靠性优先。会等待 `7z` 或 `unrar` 进程完整返回结果，代价是在匹配成功时需要花费较长时间进行完整的文件校验。

6. **查看结果**:
    * 程序会实时在终端打印出每个文件的匹配结果。
    * 所有成功匹配的结果，都会被记录在项目根目录下的 `result/` 文件夹中，以 `results_[时间戳].txt` 的格式命名。

## 注意事项

* **CPU 消耗**: 本程序是一个“计算密集型”工具。在运行过程中，它会显著占用您的 CPU 资源来进行解密运算。
* **依赖外部程序**: 本工具的可靠性直接建立在 `7-Zip` 和 `UnRAR` 的官方命令行程序之上。请务必确保它们已正确安装并配置。
